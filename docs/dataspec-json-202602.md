# GeoReferencer データ仕様書 (JSON)

## 1. 概要
本ドキュメントは、GeoReferencer (v2.0) で使用されるJSONファイルのフォーマット仕様を定義します。
これらのJSONファイルは、画像上の座標データ（ポイント、ルート、スポット、エリア）を定義するために使用されます。

## 2. 共通仕様
- **文字コード**: UTF-8
- **座標系**: 画像座標系 (ピクセル)
  - 原点 (0, 0): 画像の左上
  - X軸: 右方向へ増加
  - Y軸: 下方向へ増加

## 3. ファイルフォーマット

### 3.1 ポイント定義ファイル (Points)
ジオリファレンスの基準点となる画像上のポイントを定義します。ジオリファレンス実行時に、同IDを持つGPSポイント（Excel由来）とマッチングされます。

**構造**:
```json
{
  "points": [
    {
      "id": "String (必須)",
      "x": "Number (必須)",
      "y": "Number (必須)",
      "name": "String (任意)"
    }
  ]
}
```

**例**:
```json
{
  "points": [
    { "id": "A-01", "x": 100, "y": 200, "name": "登山口" },
    { "id": "A-02", "x": 500, "y": 600, "name": "山頂" }
  ]
}
```

### 3.2 ルート定義ファイル (Routes)
画像上のルート（経路）を定義します。

**構造**:
```json
{
  "routes": [
    {
      "name": "String (必須)",
      "waypoints": [
        {
          "x": "Number (必須)",
          "y": "Number (必須)"
        }
      ]
    }
  ]
}
```

**例**:
```json
{
  "routes": [
    {
      "name": "表参道ルート",
      "waypoints": [
        { "x": 100, "y": 200 },
        { "x": 150, "y": 250 },
        { "x": 200, "y": 300 }
      ]
    }
  ]
}
```

### 3.3 スポット定義ファイル (Spots)
画像上の特定の地点（見晴台、トイレ、分岐点など）を定義します。

**構造**:
```json
{
  "spots": [
    {
      "name": "String (必須)",
      "x": "Number (必須)",
      "y": "Number (必須)",
      "description": "String (任意)"
    }
  ]
}
```

**例**:
```json
{
  "spots": [
    { "name": "見晴台", "x": 300, "y": 400, "description": "絶景ポイント" },
    { "name": "トイレ", "x": 350, "y": 450 }
  ]
}
```

### 3.4 エリア定義ファイル (Areas)
画像上の特定の領域（危険地帯、駐車場など）を定義します。

**構造**:
```json
{
  "areas": [
    {
      "id": "String (任意)",
      "name": "String (任意)",
      "vertices": [
        {
          "x": "Number (必須)",
          "y": "Number (必須)"
        }
      ]
    }
  ]
}
```

**例**:
```json
{
  "areas": [
    {
      "id": "area_01",
      "name": "駐車場エリア",
      "vertices": [
        { "x": 100, "y": 100 },
        { "x": 200, "y": 100 },
        { "x": 200, "y": 200 },
        { "x": 100, "y": 200 }
      ]
    }
  ]
}
```

### 3.5 複合フォーマット (Combined)
ポイント、ルート、スポット、エリアを1つのファイルにまとめて定義することも可能です。

**構造**:
```json
{
  "data": {
    "points": [ ... ],
    "routes": [ ... ],
    "spots": [ ... ],
    "areas": [ ... ]
  }
}
```

**作成日**: 2026年2月13日
**バージョン**: 2.0
